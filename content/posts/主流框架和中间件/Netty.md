---
title: "Netty入门"
description: "Netty入门"
keywords: "Netty"

date: 2023-06-16T16:41:30+08:00
lastmod: 2023-06-16T16:41:30+08:00

categories:
  - 框架和中间件
tags:
  - Netty
---

## 0. 前提知识
BIO、NIO和AIO这三个概念分别对应三种通讯模型：阻塞、非阻塞、非阻塞异步
**这三个概念的区别如下：**
- BIO：一个连接一个线程，客户端有连接请求时服务器端就需要启动一个线程进行处理,线程开销大
- NIO：一个请求一个线程，客户端发送的连接请求会注册到多路复用器上，多路复用器轮询到该连接有I/O请求时才启动一个线程进行处理
- AIO：一个有效请求一个线程，客户端的I/O请求都是由OS先完成了再通知服务器应用去启动线程进行处理

**通俗地概括一下就是：**
- BIO是面向流的，NIO是面向缓冲区的
- BIO的各种流是阻塞的，而NIO是非阻塞的
- BIO的Stream是单向的，而NIO的channel是双向的

**NIO的的显著特点：** 事件驱动模型、单线程处理多任务、非阻塞I/O，I/O读写不再阻塞，而是返回0、基于block的传输比基于流的传输更高效、更高级的IO函数zero-copy、IO多路复用大大提高了Java网络应用的可伸缩性和实用性


## 1. 认识Netty
### 1.1 介绍
Netty是一个Java NIO技术的开源异步事件驱动的网络编程框架，用于快速开发可维护的高性能协议服务器和客户端。
官网：https://netty.io/

### 1.2 特点
**Netty特点：**  
- 高并发：基于 NIO（Nonblocking IO，非阻塞IO）开发，对比于 BIO（Blocking I/O，阻塞IO），他的并发性能得到了很大提高
- 传输快：传输依赖于零拷贝特性，尽量减少不必要的内存拷贝，实现了更高效率的传输
- 封装好：封装了 NIO 操作的很多细节，提供了易于使用调用接口

**Netty优点：**
- 使用简单：封装了 NIO 的很多细节，使用更简单
- 功能强大：预置了多种编解码功能，支持多种主流协议
- 扩展性强：可以通过 ChannelHandler 对通信框架进行灵活地扩展
- 性能优异：通过与其他业界主流的 NIO 框架对比，Netty 的综合性能最优
- 运行稳定：Netty 修复了已经发现的所有 NIO 的 bug，让开发人员可以专注于业务本身
- 社区活跃：Netty 是活跃的开源项目，版本迭代周期短，bug 修复速度快

**Netty高性能表现：**
- IO 线程模型：同步非阻塞，用最少的资源做更多的事
- 内存零拷贝：尽量减少不必要的内存拷贝，实现了更高效率的传输
- 内存池设计：申请的内存可以重用，主要指直接内存。内部实现是用一颗二叉查找树管理内存分配情况
- 串形化处理读写：避免使用锁带来的性能开销
- 高性能序列化协议：支持 protobuf 等高性能序列化协议

## 2. 了解Netty
教程地址：https://dongzl.github.io/netty-handbook/#/





